{"version":3,"file":"utils.js","sources":["../../_scripts/utils.js"],"sourcesContent":["// module.exports = 'sort';\n\nconst sortRhymes = (rhymes) => {\n  const syllables = 98; // TODO: get actual syllables\n  return rhymes.sort((a, b) => {\n    if (a.syllables == syllables && b.syllables == syllables) {\n      // if both rhymes have same number of syllables as query, sort by length desc\n      if (a.word.length > b.word.length) {\n        return -1\n      } else if (a.word.length < b.word.length) {\n        return 1;\n      } else {\n        return 0;\n      }\n    } else if (a.syllables == syllables) {\n      return -1;\n    } else if (b.syllables == syllables) {\n      return 1;\n    } else if (a.syllables == b.syllables) {\n      // if syllables are the same, sort by length\n      if (a.word.length > b.word.length) {\n        return -1\n      } else if (a.word.length < b.word.length) {\n        return 1;\n      } else {\n        return 0;\n      }\n    } else {\n      return a.syllables - b.syllables\n    }\n\n  });\n}\n\nconst createPuns = (movies, query, rhymes) => {\n  const matchingMovies = [];\n  const punsUsed = {};\n  movies.forEach(movie => {\n    const lower = movie.title.toLowerCase();\n    if (lower.includes(query)) return;\n    // TODO: use only the longest rhyme for a particular part of string\n    rhymes.forEach(rhyme => {\n      if (lower.includes(rhyme.word)) {\n        const editedTitle = lower.replace(rhyme.word, query)\n        .split(' ').map(w => w[0].toUpperCase() + w.substr(1).toLowerCase())\n        .join(' ');\n        if (editedTitle.length > query.length + 2) {\n          if (!(editedTitle in punsUsed)) {\n            punsUsed[editedTitle] = 1;\n            matchingMovies.push({\n              title: movie.title,\n              editedTitle,\n              votes: movie.votes,\n              rhyme\n            });\n          }\n        }\n      }\n    });\n  });\n  return matchingMovies;\n}\n\nexport { sortRhymes, createPuns };"],"names":["sortRhymes","rhymes","syllables","sort","a","b","word","length","createPuns","movies","query","matchingMovies","punsUsed","forEach","movie","lower","title","toLowerCase","includes","rhyme","editedTitle","replace","split","map","w","toUpperCase","substr","join","push","votes"],"mappings":"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"}